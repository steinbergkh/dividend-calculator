"use strict";angular.module("dividendCalculatorApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"partials/main",controller:"DividendCalculatorCtrl"}).otherwise({redirectTo:"/"}),b.html5Mode(!0)}]),angular.module("dividendCalculatorApp").controller("MainCtrl",["$scope","$http",function(a,b){b.get("/api/awesomeThings").success(function(b){a.awesomeThings=b})}]),angular.module("dividendCalculatorApp").controller("NavbarCtrl",["$scope","$location",function(a,b){a.menu=[{title:"Home",link:"/"}],a.isActive=function(a){return a===b.path()}}]),angular.module("dividendCalculatorApp").factory("InvestYear",function(){return function(a,b,c,d,e){var f=a,g=b,h=c,i=h*d,j=e,k=function(a){var b=j+i;return b/a};return{getSharesRepurchased:k,getEndingTotal:function(a){return(h+k(a))*a},getBeginningTotal:function(){return g},reinvest:function(a){j=a},getYear:function(){return f},hasReinvestment:function(){return j>0}}}}),angular.module("dividendCalculatorApp").factory("InvestGraph",function(){return function(a,b){var c=a,d=b;return{x:c,y:d}}}),angular.module("dividendCalculatorApp").controller("DividendCalculatorCtrl",["$scope","$http","InvestYear",function(a,b,c){a.settings={yearsInvest:20,initialInvestment:14e5,initialDividendPayment:3.25,dividendGrowthPerYear:.07,initialStockPrice:100,stockPriceGrowthPerYear:.035,yearsReinvest:10};var d=function(a){return h*Math.pow(1+j,a)},e=function(a){return i*Math.pow(1+k,a)};a.investmentList=[],a.reinvestmentList=[];var f=function(){for(var b=0;b<=a.settings.yearsInvest+1;){var c={year:b,amount:0};a.reinvestmentList.push(c),++b}};f();var g=function(){a.investmentList=[];for(var b=0,f=a.settings.initialInvestment,g=f/d(b),h=e(b),i=c(b,f,g,h,a.reinvestmentList[b].amount);b<=a.settings.yearsInvest;){a.investmentList.push(i);var j=d(b+1),k=a.investmentList[b].getEndingTotal(j);g+=a.investmentList[b].getSharesRepurchased(j),h=e(b+1),++b,i=c(b,k,g,h,a.reinvestmentList[b].amount)}},h=a.settings.initialStockPrice,i=a.settings.initialDividendPayment,j=a.settings.stockPriceGrowthPerYear,k=a.settings.dividendGrowthPerYear,l=function(){h=a.settings.initialStockPrice,i=a.settings.initialDividendPayment,j=a.settings.stockPriceGrowthPerYear,k=a.settings.dividendGrowthPerYear,g()};a.populateInvestment=g,a.$watchCollection("settings",l),a.$watchCollection("reinvestmentList",l),a.stockPrice=d,a.dividend=e,a.reinvest=function(b,c){c="undefined"!=typeof c?c:0,b="undefined"!=typeof b?b:0;var d=b;0==b&&(b=1),b-=1,a.reinvestmentList[b].amount=c,a.reinvestmentYear=d+1,g()},a.reinvestFilter=function(a){return a.amount>0}}]);